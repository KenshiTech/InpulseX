<script>
	import Chart from 'chart.js/auto';

	import Title from '../Title.svelte';
	import Highlight from '../Highlight.svelte';

	const data = {
		labels: [
			'TGE',
			'M1',
			'M2',
			'M3',
			'M4',
			'M5',
			'M6',
			'M7',
			'M8',
			'M9',
			'M10',
			'M11',
			'M12',
			'M13',
			'M14',
			'M15',
			'M16',
			'M17',
			'M18',
			'M19',
			'M20',
			'M21',
			'M22',
			'M23',
			'M24',
			'M25',
			'M26',
			'M27',
			'M28',
			'M29',
			'M30',
			'M31',
			'M32',
			'M33',
			'M34',
			'M35',
			'M36',
			'M37',
			'M38',
			'M39',
			'M40',
			'M41',
			'M42',
			'M43',
			'M44',
			'M45',
			'M46',
			'M47',
			'M48',
			'M49',
			'M50'
		],
		datasets: [
			{
				label: 'Core and Technical Team',
				data: [
					0.5, 0.9, 1.3, 1.7, 2.1, 2.5, 2.9, 3.3, 3.7, 4.1, 4.5, 4.9, 5.3, 5.7, 6.1, 6.6, 6.6, 6.6,
					7.1, 7.7, 8.2, 8.8, 9.4, 10, 10.7, 11.3, 11.9, 12.5, 13.1, 13.8, 13.9, 14.1, 14.2, 14.3,
					14.4, 14.5, 14.6, 14.7, 14.8, 14.8, 14.9, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15
				],
				fill: true
			},
			{
				label: 'Strategic Partners',
				data: [
					0, 0, 0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.9, 1, 1.1, 1.2, 1.3, 1.3, 1.3, 1.3, 1.5,
					1.7, 1.9, 2.2, 2.4, 2.6, 2.8, 3.1, 3.3, 3.5, 3.7, 4, 4.2, 4.4, 4.6, 4.8, 5.1, 5.3, 5.4,
					5.5, 5.6, 5.8, 5.9, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6
				],
				fill: true
			},
			{
				label: 'Marketing',
				data: [
					0.2, 0.2, 0.3, 0.3, 0.4, 0.4, 0.5, 0.7, 1, 1.2, 1.3, 1.4, 1.6, 1.7, 1.9, 2, 2, 2, 2.4,
					2.8, 3.2, 3.6, 4, 4.4, 4.8, 5.2, 5.6, 6, 6.4, 6.7, 7, 7.3, 7.6, 7.8, 8.1, 8.4, 8.6, 8.9,
					9.2, 9.5, 9.7, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10
				],
				fill: true
			},
			{
				label: 'NFT & Game Development',
				data: [
					0.3, 0.3, 0.3, 0.3, 1.7, 1.7, 1.7, 2.3, 2.3, 2.3, 3.1, 3.1, 3.1, 3.1, 3.1, 3.1, 3.1, 3.1,
					3.8, 4.6, 5.3, 6, 6.8, 7.5, 7.5, 7.5, 7.5, 7.5, 7.5, 7.5, 7.5, 7.5, 7.5, 7.5, 7.5, 7.5,
					7.5, 7.5, 7.5, 7.5, 7.5, 7.5, 7.5, 7.5, 7.5, 7.5, 7.5, 7.5, 7.5, 7.5, 7.5
				],
				fill: true
			},
			{
				label: 'SpaceX Allocation',
				data: [
					0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 2.1, 3.1, 4.2,
					5.2, 6.3, 7.3, 8.3, 9.4, 10.4, 11.5, 12.5, 13.5, 14.6, 15.6, 16.7, 17.7, 18.8, 19.8, 20.8,
					21.9, 22.9, 24, 25, 25, 25, 25, 25
				],
				fill: true
			},
			{
				label: 'Airdrops',
				data: [
					0.2, 0.2, 0.2, 0.3, 0.3, 0.3, 0.3, 0.4, 0.4, 0.4, 0.4, 0.5, 0.5, 0.5, 0.5, 0.5, 0.5, 0.5,
					0.6, 0.6, 0.7, 0.7, 0.7, 0.8, 0.8, 0.8, 0.9, 0.9, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
					1, 1, 1, 1, 1, 1, 1, 1, 1, 1
				],
				fill: true
			},
			{
				label: 'Project Reservers',
				data: [
					0, 0, 0, 0.3, 0.4, 0.5, 0.8, 1.1, 1.1, 1.1, 1.1, 1.1, 1.1, 1.1, 1.1, 1.1, 1.1, 1.1, 1.2,
					1.2, 1.3, 1.4, 1.5, 1.5, 1.6, 1.7, 1.8, 1.8, 1.9, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2,
					2, 2, 2, 2, 2, 2, 2, 2, 2
				],
				fill: true
			},
			{
				label: 'Liquidity Tokens',
				data: [
					2.1, 2.1, 2.1, 2.1, 2.1, 2.1, 2.1, 2.1, 2.1, 2.1, 2.1, 2.1, 2.1, 2.1, 2.1, 2.1, 2.1, 2.1,
					2.1, 2.1, 2.1, 2.1, 2.1, 2.1, 2.1, 2.1, 2.1, 2.1, 2.1, 2.1, 2.1, 2.1, 2.1, 2.1, 2.1, 2.1,
					2.1, 2.1, 2.1, 2.1, 2.1, 2.1, 2.1, 2.1, 2.1, 2.1, 2.1, 2.1, 2.1, 2.1, 2.1
				],
				fill: true
			},
			{
				label: 'PreSale Round',
				data: [
					1, 1, 3.8, 6.7, 9.5, 12.4, 15.2, 18.1, 18.1, 18.1, 18.1, 18.1, 18.1, 18.1, 18.1, 18.1,
					18.1, 18.1, 18.1, 18.1, 18.1, 18.1, 18.1, 18.1, 18.1, 18.1, 18.1, 18.1, 18.1, 18.1, 18.1,
					18.1, 18.1, 18.1, 18.1, 18.1, 18.1, 18.1, 18.1, 18.1, 18.1, 18.1, 18.1, 18.1, 18.1, 18.1,
					18.1, 18.1, 18.1, 18.1, 18.1
				],
				fill: true
			},
			{
				label: 'Seed Round',
				data: [
					0, 0.3, 0.8, 1.3, 1.8, 2.3, 2.8, 3.3, 3.3, 3.3, 3.3, 3.3, 3.3, 3.3, 3.3, 3.3, 3.3, 3.3,
					3.3, 3.3, 3.3, 3.3, 3.3, 3.3, 3.3, 3.3, 3.3, 3.3, 3.3, 3.3, 3.3, 3.3, 3.3, 3.3, 3.3, 3.3,
					3.3, 3.3, 3.3, 3.3, 3.3, 3.3, 3.3, 3.3, 3.3, 3.3, 3.3, 3.3, 3.3, 3.3, 3.3
				],
				fill: true
			},
			{
				label: 'Staking Rewards',
				data: [
					0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.4, 0.8,
					1.3, 1.7, 2.1, 2.5, 2.9, 3.3, 3.8, 4.2, 4.6, 5, 5.4, 5.8, 6.3, 6.7, 7.1, 7.5, 7.9, 8.3,
					8.8, 9.2, 9.6, 10
				],
				fill: true
			},
			{
				label: 'Total',
				data: [
					4.3, 5, 8.9, 13.2, 18.6, 22.6, 26.8, 31.9, 32.7, 33.4, 34.8, 35.5, 36.2, 36.8, 37.5, 38,
					38, 38, 40.1, 42.1, 44.1, 46.1, 48.2, 51.4, 53.8, 56.2, 58.6, 61.4, 64.2, 67, 69.1, 71.2,
					73.3, 75.4, 77.4, 79.4, 81.4, 83.3, 85.2, 87.2, 89.1, 91, 92.5, 94, 95.4, 96.9, 98.3,
					98.7, 99.2, 99.6, 100
				],
				fill: true
			}
		]
	};

	const config = {
		type: 'line',
		data: data,
		options: {
			responsive: true,
			aspectRatio: 3,
			elements: {
				point: {
					radius: 0
				}
			},
			plugins: {
				tooltip: {
					mode: 'index'
				},
				legend: {
					display: true,
					align: 'center',
					position: 'left'
				}
			},
			interaction: {
				mode: 'nearest',
				axis: 'x',
				intersect: false
			},
			scales: {
				x: {
					title: {
						display: true,
						text: 'Schedule'
					}
				},
				y: {
					stacked: true,
					title: {
						display: true,
						text: 'Released'
					}
				}
			}
		}
	};

	let canvas;

	const assembleChart = () => {
		new Chart(canvas, config);
	};

	$: if (canvas) {
		assembleChart();
	}
</script>

<div class="distribution">
	<div class="background" />
	<Title class="title" centered><Highlight>Distribution</Highlight> schedule</Title>
	<div class="chart">
		<canvas bind:this={canvas} width="800" height="800" />
	</div>
</div>

<style>
	.chart {
		position: relative;
		z-index: 1;
		width: 1200px;
		height: 400px;
		z-index: 1;
		margin: 0 auto;
	}
	.distribution :global(.title) {
		position: relative;
		z-index: 1;
		margin-bottom: 1em;
	}
</style>
