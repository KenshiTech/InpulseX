<script>
	import Chart from 'chart.js/auto';

	import Title from '../Title.svelte';
	import Highlight from '../Highlight.svelte';

	const data = {
		labels: [
			'TGE',
			'M1',
			'M2',
			'M3',
			'M4',
			'M5',
			'M6',
			'M7',
			'M8',
			'M9',
			'M10',
			'M11',
			'M12',
			'M13',
			'M14',
			'M15',
			'M16',
			'M17',
			'M18',
			'M19',
			'M20',
			'M21',
			'M22',
			'M23',
			'M24',
			'M25',
			'M26',
			'M27',
			'M28',
			'M29',
			'M30',
			'M31',
			'M32',
			'M33',
			'M34',
			'M35',
			'M36',
			'M37',
			'M38',
			'M39',
			'M40',
			'M41',
			'M42',
			'M43',
			'M44',
			'M45',
			'M46',
			'M47',
			'M48',
			'M49',
			'M50'
		],
		datasets: [
			{
				label: 'Core and Technical Team',
				data: [
					0.6, 0.6, 1.1, 1.6, 1.6, 2.1, 2.6, 3.1, 3.6, 4.1, 4.6, 5.1, 5.6, 6.1, 6.6, 6.6, 7.2, 7.8,
					8.4, 9.1, 9.7, 10.3, 10.9, 11.5, 12.2, 12.8, 13.4, 14.0, 14.1, 14.2, 14.3, 14.4, 14.4,
					14.5, 14.6, 14.7, 14.8, 14.8, 14.9, 15.0, 15.0, 15.0, 15.0, 15.0, 15.0, 15.0, 15.0, 15.0,
					15.0
				],
				fill: true
			},
			{
				label: 'Strategic Partners',
				data: [
					0.0, 0.0, 0.2, 0.3, 0.3, 0.5, 0.6, 0.8, 0.9, 1.1, 1.2, 1.4, 1.6, 1.7, 1.9, 1.9, 2.1, 2.3,
					2.5, 2.7, 2.9, 3.1, 3.3, 3.5, 3.7, 3.9, 4.2, 4.4, 4.6, 4.8, 5.0, 5.2, 5.4, 5.6, 5.6, 5.7,
					5.8, 5.9, 5.9, 6.0, 6.0, 6.0, 6.0, 6.0, 6.0, 6.0, 6.0, 6.0, 6.0
				],
				fill: true
			},
			{
				label: 'Marketing',
				data: [
					1.1, 1.1, 1.3, 1.4, 1.4, 1.6, 1.8, 2.0, 2.2, 2.3, 2.4, 2.6, 2.7, 2.8, 2.9, 2.9, 3.2, 3.6,
					3.9, 4.2, 4.6, 4.9, 5.2, 5.6, 5.9, 6.3, 6.6, 6.9, 7.2, 7.4, 7.7, 7.9, 8.2, 8.5, 8.7, 9.0,
					9.2, 9.5, 9.7, 10.0, 10.0, 10.0, 10.0, 10.0, 10.0, 10.0, 10.0, 10.0, 10.0
				],
				fill: true
			},
			{
				label: 'NFT Development',
				data: [
					0.1, 0.4, 0.6, 0.9, 0.9, 1.2, 1.4, 1.7, 1.7, 1.7, 1.7, 1.7, 1.7, 1.7, 1.7, 1.7, 1.8, 1.9,
					2.1, 2.2, 2.4, 2.5, 2.5, 2.5, 2.5, 2.5, 2.5, 2.5, 2.5, 2.5, 2.5, 2.5, 2.5, 2.5, 2.5, 2.5,
					2.5, 2.5, 2.5, 2.5, 2.5, 2.5, 2.5, 2.5, 2.5, 2.5, 2.5, 2.5, 2.5
				],
				fill: true
			},
			{
				label: 'Game Development',
				data: [
					0.3, 0.3, 0.4, 0.5, 0.5, 0.6, 0.7, 0.8, 0.9, 1.0, 1.1, 1.2, 1.3, 1.3, 1.4, 1.4, 2.0, 2.6,
					3.2, 3.8, 4.4, 5.0, 5.0, 5.0, 5.0, 5.0, 5.0, 5.0, 5.0, 5.0, 5.0, 5.0, 5.0, 5.0, 5.0, 5.0,
					5.0, 5.0, 5.0, 5.0, 5.0, 5.0, 5.0, 5.0, 5.0, 5.0, 5.0, 5.0, 5.0
				],
				fill: true
			},
			{
				label: 'SpaceX Allocation',
				data: [
					0.0, 1.1, 2.1, 3.2, 3.2, 4.2, 5.3, 6.4, 7.4, 8.5, 9.5, 10.6, 11.7, 12.7, 13.8, 13.8, 14.3,
					14.7, 15.2, 15.7, 16.1, 16.6, 17.1, 17.5, 18.0, 18.5, 18.9, 19.4, 19.9, 20.3, 20.8, 21.3,
					21.7, 22.2, 22.7, 23.1, 23.6, 24.1, 24.5, 25.0, 25.0, 25.0, 25.0, 25.0, 25.0, 25.0, 25.0,
					25.0, 25.0
				],
				fill: true
			},
			{
				label: 'Airdrops',
				data: [
					0.1, 0.1, 0.1, 0.2, 0.2, 0.2, 0.2, 0.3, 0.3, 0.4, 0.4, 0.4, 0.5, 0.5, 0.5, 0.5, 0.6, 0.6,
					0.7, 0.7, 0.7, 0.8, 0.8, 0.8, 0.9, 0.9, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0,
					1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0
				],
				fill: true
			},
			{
				label: 'Project Reservers',
				data: [
					0.0, 0.1, 0.1, 0.2, 0.2, 0.3, 0.3, 0.4, 0.5, 0.5, 0.6, 0.7, 0.7, 0.8, 0.9, 0.9, 0.9, 1.0,
					1.1, 1.2, 1.3, 1.4, 1.5, 1.6, 1.7, 1.8, 1.9, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0,
					2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0
				],
				fill: true
			},
			{
				label: 'Liquidity Tokens',
				data: [
					2.1, 2.1, 2.1, 2.1, 2.1, 2.1, 2.1, 2.1, 2.1, 2.1, 2.1, 2.1, 2.1, 2.1, 2.1, 2.1, 2.1, 2.1,
					2.1, 2.1, 2.1, 2.1, 2.1, 2.1, 2.1, 2.1, 2.1, 2.1, 2.1, 2.1, 2.1, 2.1, 2.1, 2.1, 2.1, 2.1,
					2.1, 2.1, 2.1, 2.1, 2.1, 2.1, 2.1, 2.1, 2.1, 2.1, 2.1, 2.1, 2.1
				],
				fill: true
			},
			{
				label: 'PreSale Round',
				data: [
					1.8, 1.8, 4.5, 7.2, 7.2, 9.9, 12.6, 15.3, 18.1, 18.1, 18.1, 18.1, 18.1, 18.1, 18.1, 18.1,
					18.1, 18.1, 18.1, 18.1, 18.1, 18.1, 18.1, 18.1, 18.1, 18.1, 18.1, 18.1, 18.1, 18.1, 18.1,
					18.1, 18.1, 18.1, 18.1, 18.1, 18.1, 18.1, 18.1, 18.1, 18.1, 18.1, 18.1, 18.1, 18.1, 18.1,
					18.1, 18.1, 18.1
				],
				fill: true
			},
			{
				label: 'Seed Round',
				data: [
					0.0, 0.6, 1.1, 1.7, 1.7, 2.2, 2.8, 3.3, 3.3, 3.3, 3.3, 3.3, 3.3, 3.3, 3.3, 3.3, 3.3, 3.3,
					3.3, 3.3, 3.3, 3.3, 3.3, 3.3, 3.3, 3.3, 3.3, 3.3, 3.3, 3.3, 3.3, 3.3, 3.3, 3.3, 3.3, 3.3,
					3.3, 3.3, 3.3, 3.3, 3.3, 3.3, 3.3, 3.3, 3.3, 3.3, 3.3, 3.3, 3.3
				],
				fill: true
			},
			{
				label: 'Staking Rewards',
				data: [
					0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0,
					0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.4, 0.8, 1.3, 1.7, 2.1, 2.5, 2.9, 3.3, 3.8, 4.2, 4.6,
					5.0, 5.4, 5.8, 6.3, 6.7, 7.1, 7.5, 7.9, 8.3, 8.8, 9.2, 9.6, 10.0
				],
				fill: true
			},
			{
				label: 'Total',
				data: [
					6.1, 8.1, 13.7, 19.3, 19.3, 25.0, 30.6, 36.2, 41.0, 43.0, 45.0, 47.0, 49.1, 51.1, 53.1,
					53.1, 55.6, 58.1, 60.6, 63.1, 65.6, 68.1, 69.9, 71.6, 73.4, 75.6, 77.8, 79.9, 81.4, 82.8,
					84.2, 85.6, 87.1, 88.5, 89.8, 91.1, 92.4, 93.7, 94.9, 96.2, 96.7, 97.1, 97.5, 97.9, 98.3,
					98.7, 99.2, 99.6, 100.0
				],
				fill: true
			}
		]
	};

	const config = {
		type: 'line',
		data: data,
		options: {
			responsive: true,
			aspectRatio: window.outerWidth > 600 ? 3 : 2,
			elements: {
				point: {
					radius: 0
				}
			},
			plugins: {
				tooltip: {
					mode: 'index'
				},
				legend: {
					display: window.outerWidth > 600,
					align: 'center',
					position: 'left'
				}
			},
			interaction: {
				mode: 'nearest',
				axis: 'x',
				intersect: false
			},
			scales: {
				x: {
					title: {
						display: true,
						text: 'Schedule'
					}
				},
				y: {
					stacked: true,
					title: {
						display: true,
						text: 'Released'
					}
				}
			}
		}
	};

	let canvas;

	const assembleChart = () => {
		new Chart(canvas, config);
	};

	$: if (canvas) {
		assembleChart();
	}
</script>

<div class="distribution">
	<div class="background" />
	<Title class="title" centered><Highlight>Distribution</Highlight> schedule</Title>
	<div class="chart">
		<canvas bind:this={canvas} width="800" height="800" />
	</div>
</div>

<style>
	.chart {
		position: relative;
		z-index: 1;
		width: 1200px;
		height: 400px;
		z-index: 1;
		margin: 0 auto;
		max-width: 100%;
	}
	.distribution :global(.title) {
		position: relative;
		z-index: 1;
		margin-bottom: 1em;
	}
	@media only screen and (max-width: 600px) {
		.chart {
			height: 120px;
		}
	}
	@media only screen and (max-width: 960px) {
		.chart {
			height: 240px;
		}
	}
</style>
